template(name='family')
    .ui.stackable.grid
        .four.wide.column
            .ui.icon.circular.basic.button.add_fam_post
                i.plus.icon
            .ui.inline.header #{counter}
            // .ui.input
            //     input.add_fam_post(type='text' placeholder='add')
            if selected_family_tags
                // if many_tags
                //     a#clear_tags.ui.black.invert.icon.compact.button.select_term
                //         i.remove.icon
                each selected_family_tags
                    +family_unselect_tag
            .ui.icon.input
                i.search.icon
                input.search_family_tag(type='text' value=family_query)
            each family_result_tags
                // .ui.label #{this}
                +family_tag_selector
                // .ui.large.label(title=count) #{name}
            div
            .ui.inline.small.header 
                i.marker.icon
                |where
            each selected_location_tags
                .ui.circular.large.black.button.unselect_location_tag
                    |#{this}
            each family_location_tags
                .ui.compact.basic.tertiary.button.select_location_tag(class=domain_selector_class)
                    |#{name} 
                    // small #{count}
            div
            .ui.small.inline.header 
                i.clock.icon
                |when
            each selected_time_tags
                .ui.circular.large.black.button.unselect_time_tag
                    |#{this}
            each family_time_tags
                .ui.compact.basic.tertiary.button.select_time_tag(class=domain_selector_class)
                    |#{name} 
                    // small #{count}
            // .ui.inline.header #{post_count}
            // each selected_family_People
            //     .ui.button.unselect_family_People #{this}
            // each family_People_tags
            //     .ui.compact.basic.button.select_domain(class=domain_selector_class)
            //         |#{name} 
            //         small #{count}
        .twelve.wide.column
            // if skv_is 'family_sort_direction' 1
            //     .ui.icon.compact.basic.tertiary.button.sort_down
            //         i.caret.down.icon
            // else
            //     .ui.icon.compact.basic.tertiary.button.sort_up
            //         i.caret.up.icon
            // .ui.icon.button.sort_retweet(class=retweet_class)
            //     i.refresh.icon
            // .ui.icon.button.sort_favorite(class=fav_class)
            //     i.favorite.icon
            // .ui.icon.compact.basic.small.button.sort_date(class=date_class)
            //     i.clock.icon
            // // .ui.compact.basic.small.tertiary.button.limit_1
            // //     |1
            // // .ui.compact.basic.small.tertiary.button.limit_10
            // //     |10
            // .ui.icon.circular.basic.button.skip_left
            //     i.chevron.left.icon
            // .ui.icon.circular.basic.button.skip_right
            //     i.chevron.right.icon
            // |#{skip_value}
            // .ui.small.input(title='skip number')
            //     input.skip_number(type='number')
            // img.ui.inline.image(src=data.header_img)
            // .ui.inline.header.pull_latest #{data.title}
            // +alpha
            // div
            // .scrolling
            //     if family_docs
            //         .ui.four.stackable.cards 
            //             each family_docs
            //                 +family_card
            //     else
            //         .ui.basic.center.aligned.segment
            //             i.big.loading.yin.yang.icon
        
            // .ui.header photos
            .ui.stackable.four.column.grid.scrolling
                each tribe_posts
                    +family_card

   
template(name='family_card')
    .ui.column
        a(href="/p/#{_id}")
            img.ui.image.say_title(src="{{c.url image_id }}" class=currentUser.invert_class)
        .content
            a.ui.small.header.say_title(href="/p/#{_id}") #{title}
            // .f12(class=post_header_class) !{text}??
            // +array_view key='tags' label='tags' direct=true
            // +array_view key='location_tags' direct=true
            // +array_view key='time_tags' direct=true
            // +array_view key='people_tags' direct=true
            a.smallscroll(href="/p/#{_id}")
                |!{content}            
            each tags
                +flat_family_tag_selector
                // a.ui.label.select_family_tag #{this}
            each family_time_tags
                .ui.small.basic.label.set_time_tag #{this}
   
template(name='family_tag_selector')
    // a.ui.big.image.basic.rounded.label.zoomer.pointer.select_tag.select_term(href='#' title="#{count} results" class="#{selector_class} #{thinking_class}")
    .ui.basic.compact.tertiary.small.button.zoomer.select_tag(title="#{count} results" class="#{selector_class} #{thinking_class}")
        // if term
        //     if term.watson.metadata.image
        //         img.ui.mini.inline.image.superzoom(src=term.watson.metadata.image )    
        strong #{name}
        // if in_dev
        //     small #{count}
        
template(name='family_unselect_tag')
    a.unselect_family_tag.ui.black.large.compact.inverted.button(href='#')
        if term
            if term.watson.metadata.image
                img.ui.avatar.compact.image.superzoom(src=term.watson.metadata.image)    
        strong #{this}

        
        
template(name='flat_family_tag_selector')
    // a.ui.big.image.basic.rounded.label.zoomer.pointer.select_tag.select_term(href='#' title="#{count} results" class="#{selector_class} #{thinking_class}")
    .ui.basic.tertiary.compact.tiny.button.zoomer.select_flat_tag(title="#{count} results" class="#{selector_class} #{thinking_class}")
        // if term
        //     if term.watson.metadata.image
        //         img.ui.mini.rounded.inline.image.superzoom(src=term.watson.metadata.image )    
        | #{this}
        // if in_dev
        //     small #{count}


template(name='post_view')
    with current_doc
        .ui.stackable.grid
            .row 
                .three.wide.column
                    .ui.basic.segment.say_content
                        a.ui.circular.icon.large.basic.button(href="/")
                            i.chevron.left.icon
                            i.big.yin.yang.icon
                        .ui.inline.header.say_title #{title}
                        .ui.list
                            .item #{_views} views
                        +array_edit key='tags' label='tags' direct=true
                        +array_edit key='location_tags' label='where' direct=true
                        +array_edit key='time_tags' label='when' direct=true
                        +array_edit key='people_tags' label='who' direct=true
                .thirteen.wide.column.scrolling
                    .ui.basic.segment.say_content
                        |!{content}
                    a(href="/")
                        img.ui.fluid.image(src="{{c.url image_id }}" class=currentUser.invert_class)

template(name='post_edit')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .ten.wide.column
                    a.ui.big.button(href="/p/#{_id}" title='save')
                        i.checkmark.big.icon
                        |save
                    .ui.inline.header
                        i.pencil.icon
                        |edit post
                    i.large.link.remove.icon.delete_post
                    +print_this
                    div.scrolling
                        +image_edit key='image_id' label='image' direct=true
                    div 
                .six.wide.column
                    +text_edit key='title' label='title' direct=true
                    +html_edit key='content' label='content' direct=true
                    +array_edit key='tags' label='tags' i='tags' direct=true
                    each tags
                        +flat_family_tag_selector
                    +array_edit key='location_tags' label='location tags' i='marker' direct=true
                    +array_edit key='time_tags' label='time tags' i='clock' direct=true
                    +array_edit key='people_tags' label='people tags' i='users' direct=true
                
template(name='array_edit')
    .spacer
    if i
        i.grey.icon(class=i)
        // +icon name=icon cl='ui avatar image'
    .ui.inline.header
        if title
            |#{title}
        else if label
            |#{label}
        else if key
            |#{key}
    .ui.input
        input.new_element(type='text' placeholder='+' autocomplete="off")
        //- +clear_value                
    if field_value
        each field_value
            if in_dev
                .ui.large.basic.circular.label
                    i.delete.icon.remove_element
                    |#{this}
                .ui.compact.basic.circular.button.pick_tag
                    |#{this}
            else
                .ui.compact.basic.circular.button.pick_tag
                    |#{this}
            
                
                
                