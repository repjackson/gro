template(name='home')
    .ui.stackable.grid
        .sixteen.wide.center.aligned.column.seg
            .ui.inline.small.header    
                |#{counter}
            if picked_tags
                // if many_tags
                //     a#clear_tags.ui.black.invert.icon.compact.button.pick_term
                //         i.remove.icon
                each picked_tags
                    +unpick_tag
            .ui.icon.input
                if is_loading
                    i.yin.yang.loading.icon
                else
                    i.search.icon
                input.search_tag(type='text' value=query)
                // .ui.label #{this}
            each result_tags
                +tag_picker
            each posts
                +post_card_small
                
                
                
template(name='tag_picker')
    // a.ui.big.image.rounded.label.zoomer.pointer.pick_tag.pick_term(href='#' title="#{count} results" class="#{picker_class} #{thinking_class}")
    a.ui.image.large.link.label.zoomer.pick_tag(title="#{count} results" class="#{picker_class} #{thinking_class}")
        // if term
        //     if term.watson.metadata.image
        //         img.ui.avatar.image.superzoom(src=term.watson.metadata.image )    
        strong #{name}
        // if in_dev
        //     small #{count}
        
template(name='unpick_tag')
    a.unpick_tag.ui.active.image.big.label(href='#')
        // if term
        //     if term.watson.metadata.image
        //         img.ui.avatar.compact.image.superzoom(src=term.watson.metadata.image)    
        strong #{this}

        
        
template(name='flat_tag_picker')
    // a.ui.big.image.rounded.label.zoomer.pointer.pick_tag.pick_term(href='#' title="#{count} results" class="#{picker_class} #{thinking_class}")
    a.ui.link.small.image.label.zoomer.pick_flat_tag(title="#{count} results" class="#{picker_class} #{thinking_class}")
        if term
            if term.watson.metadata.image
                img.ui.mini.rounded.inline.image.superzoom(src=term.watson.metadata.image )    
        | #{this}
        // if in_dev
        //     small #{count}

        
        
   
template(name='post_card_small')
    .center.aligned.column
        .content.zoomer
            // a.ui.header.zoomer(href="/#{group}/p/#{_id}") #{title}
            // a.ui.center.aligned.small.header.view_post(href="/#{group}/p/#{_id}" class=emotion_color)
            a.ui.center.aligned.small.header
                |!{data.title} #{title}
            if embed
                span.rounded.full
                    |!{embed}
                div
            else if is_image
                img.ui.fluid.rounded.image.toggle_view(src=data.url)
            else if data.thumbnail_width
                img.ui.fluid.rounded.image.zoomer(src=data.thumbnail)    
                    
            each five_tags
                +flat_tag_picker