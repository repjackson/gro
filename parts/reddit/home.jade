template(name='home')
    .ui.stackable.padded.grid
        .sixteen.wide.column
            // if skv_is 'nightmode' true
            //     i.moon.link.icon.toggle_nightmode
            // else
            //     i.lightbulb.link.icon.toggle_nightmode
            .ui.icon.input
                i.search.icon
                input.search_tag(type='text' value=query autofocus='' placeholder="#{post_counter}")
                // .ui.label #{this}
            if picked_tags
                // if many_tags
                //     a#clear_tags.ui.red.invert.icon.button.pick_term
                //         i.remove.icon
                each picked_tags
                    +unpick_tag
            each result_tags
                // .ui.label #{this}
                +tag_picker
                // .ui.label(title=count) #{name}
            // div
            // .ui.inline.header #{post_count}
            // if skv_is 'sort_direction' 1
            //     .ui.icon.compact.basic.tertiary.button.sort_down
            //         i.caret.down.icon
            // else
            //     .ui.icon.compact.basic.tertiary.button.sort_up
            //         i.caret.up.icon
            // if in_dev
            //     if skv_is 'nsfw' true
            //         .ui.compact.black.button.make_safe
            //             | nsfw
            //     else
            //         .ui.compact.basic.tertiary.button.make_nsfw
            //             | safe
        .ui.sixteen.wide.column                
            .scrolling
                // if one_post
                //     .ui.stackable.one.column.grid
                //         each rposts
                //             +card
                        
                // else if two_posts
                //     .ui.stackable.two.centered.column.grid
                //         each rposts
                //             +card
                // else if three_posts
                .ui.stackable.three.column.grid.scrolling
                    each rposts
                        +card
                // else
                //     .ui.basic.center.aligned.segment
                //         i.big.loading.yin.yang.icon
   
template(name='card')
    .column
        // .ui.stackable.equal.width.compact.grid
        //     .row
        a(href=data.url target='_window')
            if embed
                span.rounded.full
                    |!{embed}
                div
            else if is_image
                img.ui.fluid.zoomer.image.toggle_view(src=data.url)    
            else if watson.metadata.image
                // |metadata
                img.ui.inline.zoomer.image.toggle_view(src=watson.metadata.image)
            else if data.thumbnail.length
                // |thumbnail
                a.view_post
                    img.ui.inline.zoomer.fluid.image.zoomer(src=data.thumbnail)    
            // else if data.thumbnail.length
            //     .column
            //         a.view_post(href=data.url class=post_header_class)
            //             img.ui.rounded.inline.image.zoomer(src=data.thumbnail)    
            // .column
        .content
            a.ui.inline.header.view_post.zoomer(href=data.url class=post_header_class target='_window')
                // strong #{data.ups}:
                |!{data.title} 
                // span.inline.content
            |{{ufrom data.created_utc}}
            each unique_tags
                a.ui.basic.label.flat_tag_pick #{this}
            // div
   
   
   
        
template(name='unpick_tag')
    a.unpick.ui.black.compact.button(href='#')
        if term
            if term.watson.metadata.image
                img.ui.avatar.compact.image.superzoom(src=term.watson.metadata.image)    
        strong #{this}


        

template(name='flat_tag_picker')
    // a.ui.big.image.basic.rounded.label.zoomer.pointer.select_tag.select_term(href='#' title="#{count} results" class="#{selector_class} #{thinking_class}")
    .ui.basic.tertiary.compact.button.zoomer.select_flat_tag(title="#{count} results" class="#{selector_class} #{thinking_class}")
        // if term
        //     if term.watson.metadata.image
        //         img.ui.mini.rounded.inline.image.superzoom(src=term.watson.metadata.image )    
        strong #{this}
        // if in_dev
        //     small #{count}



           
                                   
           
                                
                                
                                
template(name='tag_picker')
    // a.ui.big.image.rounded.label.zoomer.pointer.pick_tag.pick_term(href='#' title="#{count} results" class="#{picker_class} #{thinking_class}")
    .ui.compact.tertiary.button.zoomer.pick_tag.penny.add_global_karma(title="#{count} results" class="#{picker_class} #{thinking_class}")
        if term
            if term.watson.metadata.image
                img.ui.avatar.image.superzoom(src=term.watson.metadata.image )    
        strong #{name}
        // if in_dev
        //     small #{count}