template(name='course_card')
    a.ui.card(href="/course/#{_id}/view")
        img.ui.image(src="{{c.url image height=400 width=400 gravity='face' crop='fill'}}")
        .content
            .header #{title} $#{price}
            each tags
                .ui.small.label #{this}
            each ingredient_tags
                .ui.small.label #{this}
            |#{points}
                
            
template(name='course_home')
    with current_doc
        .ui.stackable.padded.grid
            .row 
                .sixteen.wide.column.scrolling
                    a.ui.circular.icon.button(href="/school")
                        i.university.icon
                    a.ui.center.aligned.inline.header(href="/course/#{_id}")
                        if image
                            img.ui.avatar.image(src="{{c.url image width=400 height=400 crop='fill'}}")
                        |#{title}
                    // .ui.fluid.vertical.small.menu
                    //     a.disabled.grey.item(href="/course/#{_id}/content" class="{{isActiveRoute 'course_content'}}")
                    //         i.content.icon
                    //         |content
                    //     a.disabled.grey.item(href="/course/#{_id}/calendar" class="{{isActiveRoute 'course_calendar'}}")
                    //         i.calendar.icon
                    //         |calendar
                    //     a.disabled.grey.item(href="/course/#{_id}/classlist" class="{{isActiveRoute 'course_classlist'}}")
                    //         i.users.icon
                    //         |class list
                    //     a.disabled.grey.item(href="/course/#{_id}/locker" class="{{isActiveRoute 'course_locker'}}")
                    //         i.inbox.icon
                    //         |locker
                    //     a.disabled.grey.item(href="/course/#{_id}/assignments" class="{{isActiveRoute 'course_assignments'}}")
                    //         i.content.icon
                    //         |assignments
                    //     a.disabled.grey.item(href="/course/#{_id}/discussions" class="{{isActiveRoute 'course_discussions'}}")
                    //         i.calendar.icon
                    //         |discussions
                    //     a.disabled.grey.item(href="/course/#{_id}/groups" class="{{isActiveRoute 'course_groups'}}")
                    //         i.users.icon
                    //         |groups
                    //     a.disabled.grey.item(href="/course/#{_id}/quizzes" class="{{isActiveRoute 'course_quizzes'}}")
                    //         i.question.icon
                    //         |quizzes
                    //     a.disabled.item(href="/course/#{_id}/surveys" class="{{isActiveRoute 'course_surveys'}}")
                    //         i.question.icon
                    //         |surveys
                    //     a.disabled.item(href="/course/#{_id}/grades")
                    //         i.tasks.icon
                    //         |grades
                    //     a.disabled.item(href="/course/#{_id}/progress" class="{{isActiveRoute 'course_progress'}}")
                    //         i.tasks.icon
                    //         |class progress
                    //     a.disabled.item(href="/course/#{_id}/competencies" class="{{isActiveRoute 'course_competencies'}}")
                    //         i.checkmark.icon
                    //         |competencies
                    if can_edit
                        a.edit_course(href="/course/#{_id}/edit")
                            i.big.blue.pencil.circular.link.icon
                    .ui.inline.header(href='professor')
                        i.user.icon
                        |#{professor}
                    .ui.inline.header(title='section')
                        i.calendar.icon
                        |#{section}
                    // a.ui.header(href=link title='link')
                    //     i.link.icon
                    //     |link
                    if in_dev
                        +print_this
                    // +voting_full
                    // +array_view key='tags' label='tags' icon='tags' direct=true
                    // +comments
                    // .f11 #{description}
                    // +image_view key='image' label='image' direct=true
                    .ui.inline.header
                        |#{course_posts.count} posts
                    .ui.circular.basic.icon.button.add_post
                        i.plus.icon
                .sixteen.wide.column
                    if selected_course_tags
                        // if many_tags
                        //     a#clear_tags.ui.black.invert.icon.compact.button.select_term
                        //         i.remove.icon
                        each selected_course_tags
                            +course_unselect_tag
                    .ui.icon.input
                        i.search.icon
                        input.search_course_tag(type='text' value=course_query)
                    each course_result_tags
                        // .ui.label #{this}
                        +course_tag_selector
                    div
                    i.large.clock.icon
                    if selected_time_tags
                        each selected_time_tags
                            a.unselect_time_tag.ui.active.large.compact.button(href='#')
                                strong #{this}
                    each course_time_tags
                        .ui.basic.compact.small.button.zoomer.select_time_tag(title="#{count} results" class="#{selector_class} #{thinking_class}")
                            strong #{name}
                        
                    div
                    i.large.marker.icon
                    if selected_location_tags
                        each selected_location_tags
                            a.unselect_location_tag.ui.active.large.compact.button(href='#')
                                strong #{this}
                    each course_location_tags
                        .ui.basic.compact.small.button.zoomer.select_location_tag(title="#{count} results" class="#{selector_class} #{thinking_class}")
                            strong #{name}
                        
                    .scrolling
                        each course_posts
                            a.ui.fluid.card(href="/course/#{course_id}/post/#{_id}") 
                                .content 
                                    .header #{title}
                                    if youtube_id
                                        +youtube_view key='youtube_id' label='youtube id' direct=true
        
                                    .smallscrol
                                        |!{content}
                                        if raw
                                            |!{raw}
                                    each tags
                                        .ui.small.basic.label #{this}


template(name='course_edit')
    with current_doc
        .ui.stackable.padded.grid
            .row 
                .five.wide.column
                    a.ui.green.circular.icon.button(href="/course/#{_id}" title='save')
                        i.checkmark.big.icon
                    .ui.inline.header 
                        i.pencil.icon
                        small edit course
                        |#{title}
                    i.link.big.remove.icon.delete_item(title='delete menu item')
                    +text_edit key='title' icon='header' direct=true
                    +text_edit key='professor' icon='user' direct=true
                    +text_edit key='section' icon='clone' direct=true
                    +link_edit key='link' icon='link' direct=true
                    // +image_edit key='image' label='image' direct=true
                    // +text_edit key='location' label='location' icon='marker' direct=true
                    // +icon_edit key='icon' label='icon' direct=true
                    div 
                .six.wide.column
                    +textarea_edit key='description' label='description' direct=true
                    +array_edit key='tags' label='tags' direct=true
                    +array_edit key='ingredient_tags' label='ingredients' direct=true
                .five.wide.column
                    +boolean_edit key='published' direct=true
                
                
                
template(name='course_tag_selector')
    // a.ui.big.image.basic.rounded.label.zoomer.pointer.select_tag.select_term(href='#' title="#{count} results" class="#{selector_class} #{thinking_class}")
    .ui.basic.compact.circular.button.zoomer.select_tag(title="#{count} results" class="#{selector_class} #{thinking_class}")
        if term
            if term.watson.metadata.image
                img.ui.mini.inline.image.superzoom(src=term.watson.metadata.image )    
        strong #{name}
        // if in_dev
        //     small #{count}
        
template(name='course_unselect_tag')
    a.unselect_course_tag.ui.black.large.compact.inverted.button(href='#')
        if term
            if term.watson.metadata.image
                img.ui.avatar.compact.image.superzoom(src=term.watson.metadata.image)    
        strong #{this}

        
        
template(name='flat_course_tag_selector')
    // a.ui.big.image.basic.rounded.label.zoomer.pointer.select_tag.select_term(href='#' title="#{count} results" class="#{selector_class} #{thinking_class}")
    .ui.basic.compact.tiny.button.zoomer.select_flat_tag(title="#{count} results" class="#{selector_class} #{thinking_class}")
        if term
            if term.watson.metadata.image
                img.ui.mini.rounded.inline.image.superzoom(src=term.watson.metadata.image )    
        | #{this}
        // if in_dev
        //     small #{count}

                