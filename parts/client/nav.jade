template(name='nav')
    .ui.fluid.attached.borderless.inverted.large.menu.hscroll
        // a.icon.item.toggle_sidebar.no_blink
        //     i.bars.icon
    
        a.icon.item.blink.clear.penny.add_global_karma(href="/" class="{{isActiveRoute regex='home'}}")
            i.yin.yang.large.icon
        a.icon.item.blink.clear.penny.add_global_karma(href="/stats" class="{{isActiveRoute 'stats'}}")
            i.line.chart.icon
        a.icon.item.blink.clear.penny.add_global_karma(href="/love" class="{{isActiveRoute 'love'}}")
            i.heart.outline.icon
        if currentUser
            a.icon.item.blink.clear.penny.add_global_karma(href="/users" class="{{isActiveRoute 'users'}}")
                i.users.icon
        .item.add_global_karma(title='session karma')
            i.grey.lightning.icon
            |#{session_clicks}
        .item.add_global_karma(title='global karma')
            i.grey.globe.icon
            |#{global_karma}
        +status
    
        if currentUser
            if is_dev 
                .icon.item
                    i.code.icon
            .right.menu
                a.icon.item.add_post.penny.add_global_karma
                    i.plus.icon
            
                // if unread_count
                //     a.item.alerts.select_term(href="#" class=alert_toggle_class)
                //         i.bell.icon
                //         if unread_count
                //             |#{unread_count}
                // else
                //     a.icon.item(href="/inbox" class="{{isActiveRoute 'inbox'}}")
                //         i.outline.bell.icon
                // a.icon.item(href="/u/#{currentUser.username}/messages" class="{{isActivePath 'user_messages'}}" title="#{user.username} messages")
                //     i.inbox.icon
                a.icon.item.penny.add_global_karma(href="/u/#{currentUser.username}/credit" class="{{isActivePath 'user_credit'}}" title="#{user.username} credit")
                    strong #{currentUser.points}
                a.item.penny.add_global_karma(href="/u/#{currentUser.username}" class="{{isActiveRoute regex='user'}}")
                    if currentUser.profile_image_id
                        if is_admin
                            i.shield.icon(title='admin mode on')
                        else
                            img.ui.avatar.compact.image(src="{{c.url currentUser.profile_image_id height=200 width=200 gravity='face' crop='fill'}}" class=currentUser.invert_class)
                    else 
                        i.user.icon
                    strong.mobile.hidden #{currentUser.name}
                a.icon.item.toggle_rightbar.no_blink.penny.add_global_karma
                    i.bars.icon
            
        else
            // a.icon.item(href="/register" title='login')
            //     i.user.plus.large.icon nbjj vbnhjukiop
            a.icon.item(href="/login" title='login')
                i.chevron.right.large.icon


template(name='topbar')
    .ui.fluid.attached.segment
        .ui.middle.aligned.divided.list
            each recent_alerts
                +recent_alert
        a.ui.icon.attached.basic.button.item.close_topbar(href="/inbox")
            i.inbox.icon
            |inbox
        
template(name='recent_alert')        
    .item.alert
        .right.floated.content
            i.eye.link.icon.mark_read(title='mark read')
        img.ui.avatar.image(src="{{c.url author.profile_image_id height=200 width=200 gravity='face' crop='fill'}}")
        .content
            .header
                |#{description} 
            .description #{author.name} #{when}
            
            
            
            
template(name='right_sidebar')
    .ui.right.sidebar.vertical.borderless.inverted.menu
        // a.item.toggle_rightbar.no_blink(href="/u/#{currentUser.username}" class="{{isActiveRoute 'user_layout'}}")
        //     img.ui.avatar.compact.image(src="{{c.url 'one_logo' height=200 width=200 gravity='face' crop='fill'}}")
        //     |#{currentUser.name}
        a.item.toggle_rightbar.no_blink(href="/u/#{currentUser.username}/" class="{{isActiveRoute 'user_dashboard'}}")
            | dashboard (#{currentUser.points}p)
            i.dashboard.icon
        
        a.item.toggle_rightbar.no_blink(href="/u/#{currentUser.username}/credits" class="{{isActiveRoute 'user_credits'}}")
            | #{currentUser.total_credit_amount}p received
            i.chevron.down.icon
        a.item.toggle_rightbar.no_blink(href="/u/#{currentUser.username}/debits" class="{{isActiveRoute 'user_sent'}}")
            | #{currentUser.total_debit_amount}p sent
            i.chevron.up.icon
        .ui.divider
        a.item.toggle_rightbar.no_blink(href="/u/#{currentUser.username}/edit" title='edit your account')
            i.cog.icon
            |settings
        // a.item.toggle_nightmode.toggle_rightbar.no_blink(href="#")
        //     i.lightbulb.icon
        //     |dark mode
        a.item.logout(href="/u/#{currentUser.username}/messages" class="{{isActiveRoute 'user_messages'}}" )
            |logout
            if is_logging_out
                i.refresh.loading.icon
            else
                i.sign.out.icon



template(name='left_sidebar')
    .ui.left.sidebar.vertical.borderless.inverted.menu
        // a.item.toggle_sidebar.no_blink(href="/" class="{{isActiveRoute '/'}}")
        //     img.ui.avatar.compact.image(src="{{c.url 'one_logo' height=200 width=200 gravity='face' crop='fill'}}")
        //     |One
        // a.item.set_member.toggle_sidebar.no_blink(href="/m/member" class="{{isActivePath 'm/member'}}" title='players')
        a.item.set_member.toggle_sidebar.no_blink(href="/users" class="{{isActivePath 'users'}}" title='users')
            i.users.icon
            | users
        a.item.toggle_sidebar.no_blink(href="/reddit" class="{{isActivePath '/reddit'}}")
            i.reddit.icon
            |reddit
        a.item.toggle_sidebar.no_blink(href="/stack" class="{{isActivePath '/stack'}}")
            i.stack.exchange.icon
            |stack exchange
        a.item.toggle_sidebar.no_blink(href="/questions" class="{{isActivePath '/questions'}}")
            i.question.icon
            |questions
        a.item.toggle_sidebar.no_blink(href="/m/offer" class="{{isActivePath '/m/offer'}}")
            i.hand.holding.heart.icon
            |offers
        a.item.toggle_sidebar.no_blink.set_post(href="/m/post" class="{{isActivePath '/m/post'}}")
            i.newspaper.icon
            |news
        a.item.toggle_sidebar.no_blink(href="/m/collective" class="{{isActivePath 'requests'}}")
            i.users.icon
            |collectives
        a.item.toggle_sidebar.no_blink.set_bug(href="/m/bug" class="{{isActivePath '/m/bug'}}")
            i.bug.icon
            |bugs
        a.icon.item.toggle_sidebar.no_blink.set_photo(href="/m/photo" class="{{isActivePath '/m/photo'}}" title='photos')
            i.picture.icon
            |photos  
        a.icon.item.toggle_sidebar.no_blink.set_expense(href="/m/expense" class="{{isActivePath '/m/expense'}}" title='expenses')
            i.dollar.icon
            |expenses            
        // a.item.toggle_sidebar.no_blink.set_rental(href="/m/rental" class="{{isActivePath regex='rentals'}}")
        //     i.clock.icon
        //     |rentals
        // if has_badge 'facilitator'
        // a.item.toggle_sidebar.no_blink(href="/chat" class="{{isActivePath '/chat'}}" title='chat') 
        //     |chat
        //     i.chat.icon
        // if is_eric
        //     a.icon.item.toggle_dev.toggle_sidebar.no_blink
        //         |toggle dev
        //         if is_dev
        //             i.code.blue.icon
        //         else
        //             i.code.icon
        if is_in_admin
            a.icon.item.toggle_admin.toggle_sidebar.no_blink
                |toggle admin
                if is_admin
                    i.shield.blue.icon
                else
                    i.shield.icon
            
        if is_admin
            // a.item.toggle_sidebar.no_blink.set_badge(href="/m/badge" class="{{isActivePath 'badges'}}")
            //     i.certificate.blue.icon
            //     | badges
            // a.item.toggle_sidebar.no_blink.set_debit(href="/m/debit" class="{{isActivePath regex='rentals'}}")
            //     i.gift.blue.icon
            //     |gifts
            .divider
            // a.item.toggle_sidebar.no_blink.set_project(href="/m/project" class="{{isActivePath regex='projects'}}")
            //     i.tasks.blue.icon
            //     | projects
            // a.item.toggle_sidebar.no_blink(href="/m/room" class="{{isActiveRoute 'requests'}}")
            //     i.building.blue.icon
            //     |rooms
            a.blue.item.set_model.toggle_sidebar.no_blink(href="/m/model" class="{{isActivePath '/m/model'}}")
                |admin
                i.database.blue.icon
            a.item.set_user.toggle_sidebar.no_blink(href="/m/user" class="{{isActiveRoute '/m/user'}}")
                i.blue.users.icon
                | all users
