template(name='person_view')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .four.wide.column
                    a.ui.basic.button(href="/people")
                        i.left.chevron.icon
                        |people
                    .ui.center.aligned.header 
                        if icon
                            +icolor name=icon
                        |#{first_name} #{last_name}
                        |#{title}
                    // if can_edit
                    a.ui.basic.icon.button(href="/person/#{_id}/edit")
                        i.setting.large.icon
                    if image_link
                        img(src=image_link)
                    +image_view key='image_id' icon='image' label='image'
                    +array_view key='tags' icon='tags'
                    +array_view key='location_tags' icon='tags'
                    .spacer
                    if link
                        a.ui.basic.button(href=link target='_window')
                            i.external.icon
                            |view site
                        .spacer
                    div
                    .spacer
                    a.ui.compact.basic.button(href=address_link target='_window')
                        i.marker.icon
                        |#{address}
                    // +viewing
                .twelve.wide.column
                    |!{description}
                    .ui.header posts
                    i.plus.circular.link.icon.add_post
                    each person_posts
                        a.ui.header(href="/post/#{_id}/") #{title}
                    